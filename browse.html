<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>VibeZ : Browse</title>
    <link rel="stylesheet" href="FinalProject.css">
</head>
<body>
    <!-- Top part of each page, includes logo and top navigation -->
    <div id="header">
        <div id="logo">
            <a href="index.html"><img src="images/VibeZ.png"></a>
        </div>
        <div id="topnav">
            <a href="index.html">Home</a>
            <a href="mysongs.html" > My Songs </a>
            <a href="browse.html" class="active"> Browse All </a>
            <a href="speedsearch.html"> Speed Search </a>
        </div>
    </div>
        <div class="content">
            <h2> Browse Songs </h2>
            <div id="genreBar">
                
            </div>
            <div class="toggleButtonDiv">
                <button class="toggleButton" onclick="toggleGrid()">Change View</button>
            </div>
            <hr class="songs">
            <div class="songGrid" id="songGrid1">
                <!-- song card is used to display a card version of the song -->
                <!-- <div class="songCard"> -->
                    <!-- required for display, albumImage:songName:artistName:release the url for spotify is an optional thing to discuss -->
                    <!-- <img src="images/RickAstley.jpg">
                    <h3> Never Gonna Give You Up </h3>
                    <p> Rick Astley, 1987</p>
                </div> -->
            </div>
        </div>
        <script>
            url = "https://harmeets.sgedu.site/genres.php";
            fetch(url)
                .then(res => res.text())
                .then (data => 
                {
                    let parsedData = JSON.parse(data);
                    console.log(parsedData)
                    parsedData.data.forEach(genre => {
                        document.getElementById("genreBar").insertAdjacentHTML("beforeend", "<button>" + genre.name +"</button>")
                    });
                })
            .catch (error => console.log(error));

            url = "https://harmeets.sgedu.site/proxy.php";
            fetch(url)
                .then(res => res.text())
                .then (data => 
                {
                    let parsedData = JSON.parse(data);
                    console.log(parsedData)
                    parsedData.data.forEach(song => {
                        document.getElementById("songGrid1").insertAdjacentHTML("beforeend", "<div class='songCard'> <img src=' " + song.album.cover_medium + "'> <h3>" + song.title + "</h3> <p>" + song.artist.name + 
                            "</p> <audio controls> <source src='" + song.preview + "' type='audio/mpeg'> </audio> <button> &hearts; </button> </div>")
                    });
                })
            .catch (error => console.log(error));
            
            function toggleGrid() {
                const collection = document.getElementsByClassName("songCard");
                for (let element of collection){
                    element.classList.toggle("songLine");
                }
            }
            </script>
</body>

</html>
